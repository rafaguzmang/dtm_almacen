<template xml:space="preserve">
    <t t-name="dtm_almacen.salidas" owl="1">
        <div class="salidas-container">
            <!-- Encabezado -->
            <div class="salidas-header">
                <h1>Material Indirecto</h1>
                <button class="btn-laminas" t-on-click="laminasFunc" t-if="state.laminas">
                    <span></span> L谩minas Cortadas
                </button>
            </div>

            <!-- Tabla -->
            <div class="salidas-tabla-wrapper">
                <table class="salidas-tabla">
                    <thead>
                        <tr>
                            <th>C贸digo</th>
                            <th>Nombre</th>
                            <th>Medida</th>
                            <th>Stock</th>
                            <th>Solicitado</th>
                            <th>Salida</th>
                            <th>Responsable</th>
                            <th>Localizaci贸n</th>
                        </tr>    
                    </thead>
                    <tbody>
                        <!-- Fila de Filtros -->
                        <tr class="filtros-row">
                            <td>
                                <input type="number" name="codigo_filtro" min="0" class="filtro-input" placeholder="C贸digo..." 
                                    t-on-input="(ev)=> this.codigoFiltro(ev)"/>
                            </td>
                            <td>
                                <input type="text" name="nombre_filtro" class="filtro-input" placeholder="Nombre..." 
                                    t-on-input="(ev) => this.nombreFiltro(ev)"/>
                            </td>
                            <td>
                                <input type="text" name="medida_filtro" class="filtro-input" placeholder="Medida..."
                                    t-on-input="(ev) => this.medidaFiltro(ev)"/>
                            </td>
                            <td>
                                <select name="stock_filtro" class="filtro-select" t-on-change="(ev) => this.stockFiltro(ev)">
                                    <option value="">Todo...</option>
                                    <option value="con_stock">Con stock</option>
                                    <option value="sin_stock">Sin stock</option>  
                                </select>
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <input type="text" class="filtro-input" placeholder="Localizaci贸n..."/>
                            </td>            
                        </tr>
                        
                        <!-- Filas de datos -->
                        <t t-foreach="state.materiales" t-as="material" t-key="material.codigo">
                            <tr class="salida-row">
                                <td class="td-codigo" name="codigo_material">
                                    <span class="codigo-badge"><t t-esc="material.codigo"/></span>
                                </td>
                                <td class="td-nombre">
                                    <t t-esc="material.nombre"/>
                                </td>
                                <td class="td-medida">
                                    <t t-esc="material.medida"/>
                                </td>
                                <td class="td-stock">
                                    <input type="number" min="0" class="input-stock" t-att-value="material.cantidad" t-on-change="(ev) => this.actualizarStock(ev)"/>
                                </td>
                                <td class="td-solicitado">
                                    <span class="solicitado-badge">
                                        <t t-esc="material.apartado"/>
                                    </span>
                                </td>
                                <td class="td-salida">
                                    <input type="number" min="0" class="input-numero" value="0" placeholder="0" t-on-change='(ev)=>this.cantidadSalida(ev)'/>
                                </td>
                                <td class="td-responsable">
                                    <select name="lista_personal" class="select-personal">
                                        <option value="">Seleccionar...</option>
                                        <t t-foreach="state.personal" t-as="persona" t-key="persona.id">
                                            <option t-att-value="persona.id">
                                                <t t-esc="persona.nombre"/>
                                            </option>
                                        </t>
                                    </select>
                                </td>
                                <td class="td-localizacion">
                                    <input type="text" class="input-localizacion" t-att-value="material.localizacion"/>            
                                </td>                
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>

        <div t-if="state.laminasDialog">
            <LaminaDialogo cerrar="laminasFuncClose"/>
        </div>
    </t>
</template>